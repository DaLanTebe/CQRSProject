{
  "info": {
    "_postman_id": "8b0563de-ab7a-4f64-bcee-20c6c5ccc35e",
    "name": "Axon CQRS Order Management API",
    "description": "ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ CQRS Ñ Event Sourcing Ð½Ð° Spring Boot + Axon",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "45649394"
  },
  "item": [
    {
      "name": "ðŸ  Health Check & Diagnostics",
      "item": [
        {
          "name": "1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÑ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:8080/actuator/health",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8080",
              "path": [
                "actuator",
                "health"
              ]
            }
          },
          "response": []
        },
        {
          "name": "2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ðº Axon",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:8080/debug/axon",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8080",
              "path": [
                "debug",
                "axon"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "ðŸ“ ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹ (Write Side)",
      "item": [
        {
          "name": "1. Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð· (CREATE)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"productName\": \"MacBook Pro 16\",\n  \"amount\": 2500.00,\n  \"customerId\": \"customer-001\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "http://localhost:8080/api/orders",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8080",
              "path": [
                "api",
                "orders"
              ]
            }
          },
          "response": []
        },
        {
          "name": "2. ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð· (CONFIRM)",
          "request": {
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "http://localhost:8080/api/orders/{{orderId}}/confirm",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8080",
              "path": [
                "api",
                "orders",
                "{{orderId}}",
                "confirm"
              ]
            }
          },
          "response": []
        },
        {
          "name": "3. ÐžÑ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð· (CANCEL)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"ÐŸÐµÑ€ÐµÐ´ÑƒÐ¼Ð°Ð» Ð¿Ð¾ÐºÑƒÐ¿Ð°Ñ‚ÑŒ\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "http://localhost:8080/api/orders/{{orderId}}/cancel",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8080",
              "path": [
                "api",
                "orders",
                "{{orderId}}",
                "cancel"
              ]
            }
          },
          "response": []
        },
        {
          "name": "4. Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð· Ñ Ð¾ÑˆÐ¸Ð±ÐºÐ¾Ð¹ (Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"productName\": \"Test Product\",\n  \"amount\": -100.00,\n  \"customerId\": \"test-customer\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "http://localhost:8080/api/orders",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8080",
              "path": [
                "api",
                "orders"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "ðŸ“– Ð—Ð°Ð¿Ñ€Ð¾ÑÑ‹ (Read Side)",
      "item": [
        {
          "name": "1. ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð· Ð¿Ð¾ ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:8080/api/orders/{{orderId}}",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8080",
              "path": [
                "api",
                "orders",
                "{{orderId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "2. ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð²ÑÐµ Ð·Ð°ÐºÐ°Ð·Ñ‹ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:8080/api/orders?customerId=customer-001",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8080",
              "path": [
                "api",
                "orders"
              ],
              "query": [
                {
                  "key": "customerId",
                  "value": "customer-001"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "3. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¿ÑƒÑÑ‚ÑƒÑŽ Ð‘Ð”",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:8080/api/orders?customerId=non-existing",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8080",
              "path": [
                "api",
                "orders"
              ],
              "query": [
                {
                  "key": "customerId",
                  "value": "non-existing"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "ðŸŽ¯ ÐŸÐ¾Ð»Ð½Ñ‹Ðµ ÑÑ†ÐµÐ½Ð°Ñ€Ð¸Ð¸ (End-to-End)",
      "item": [
        {
          "name": "Ð¡Ñ†ÐµÐ½Ð°Ñ€Ð¸Ð¹ 1: Ð£ÑÐ¿ÐµÑˆÐ½Ñ‹Ð¹ Ð¶Ð¸Ð·Ð½ÐµÐ½Ð½Ñ‹Ð¹ Ñ†Ð¸ÐºÐ» Ð·Ð°ÐºÐ°Ð·Ð°",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "console.log('=== Ð¡Ñ†ÐµÐ½Ð°Ñ€Ð¸Ð¹ 1: ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ñ†Ð¸ÐºÐ» Ð·Ð°ÐºÐ°Ð·Ð° ===');",
                  "// Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾Ð³Ð¾ ID Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð°",
                  "const orderId = 'test-' + Date.now();",
                  "pm.collectionVariables.set('orderId', orderId);",
                  "console.log('Ð¡Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½ orderId: ' + orderId);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"productName\": \"iPhone 15 Pro\",\n  \"amount\": 1299.99,\n  \"customerId\": \"john-doe-123\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "http://localhost:8080/api/orders",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8080",
              "path": [
                "api",
                "orders"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "ðŸ”§ Ð£Ñ‚Ð¸Ð»Ð¸Ñ‚Ñ‹ Ð¸ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³",
      "item": [
        {
          "name": "1. Axon Server UI Dashboard",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:8024",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8024"
            },
            "description": "Ð’ÐµÐ±-Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ Axon Server (Ð¿Ð¾Ñ€Ñ‚ 8024)"
          },
          "response": []
        },
        {
          "name": "2. H2 Database Console",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:8080/h2-console",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8080",
              "path": [
                "h2-console"
              ]
            },
            "description": "Ð’ÑÑ‚Ñ€Ð¾ÐµÐ½Ð½Ð°Ñ ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ H2 Ð‘Ð” (Ð»Ð¾Ð³Ð¸Ð½: sa, Ð¿Ð°Ñ€Ð¾Ð»ÑŒ: Ð¿ÑƒÑÑ‚Ð¾)"
          },
          "response": []
        },
        {
          "name": "3. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸ Spring Boot",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:8080/actuator/metrics",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8080",
              "path": [
                "actuator",
                "metrics"
              ]
            }
          },
          "response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "exec": [
          "// Ð“Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ñ€ÐµÐ´Ð²Ð°Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°",
          "console.log('=== Axon CQRS Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ===');",
          "console.log('Ð’Ñ€ÐµÐ¼Ñ: ' + new Date().toISOString());",
          "",
          "// Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ",
          "if (!pm.collectionVariables.get('orderId')) {",
          "    pm.collectionVariables.set('orderId', 'test-order-001');",
          "}",
          "",
          "// Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ñ ÐµÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð¾",
          "// pm.request.headers.add({",
          "//     key: 'Authorization',",
          "//     value: 'Bearer ' + pm.collectionVariables.get('token')",
          "// });"
        ],
        "type": "text/javascript"
      }
    },
    {
      "listen": "test",
      "script": {
        "exec": [
          "// ÐžÐ±Ñ‰Ð¸Ðµ Ñ‚ÐµÑÑ‚Ñ‹ Ð´Ð»Ñ Ð²ÑÐµÑ… Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²",
          "pm.test('Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð¾Ñ‚Ð²ÐµÑ‚Ð° ÑƒÑÐ¿ÐµÑˆÐ½Ñ‹Ð¹', function() {",
          "    pm.expect(pm.response.code).to.be.oneOf([200, 201, 202, 204]);",
          "});",
          "",
          "pm.test('ÐžÑ‚Ð²ÐµÑ‚ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Content-Type', function() {",
          "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "});",
          "",
          "// Ð”Ð»Ñ POST Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ðµ orderId",
          "if (pm.request.method === 'POST' && pm.request.url.toString().includes('/orders')) {",
          "    pm.test('ÐžÑ‚Ð²ÐµÑ‚ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ orderId', function() {",
          "        var jsonData = pm.response.json();",
          "        pm.expect(jsonData.orderId).to.not.be.empty;",
          "        ",
          "        // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ orderId Ð´Ð»Ñ Ð¿Ð¾ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ñ… Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²",
          "        pm.collectionVariables.set('orderId', jsonData.orderId);",
          "        console.log('Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ñ‘Ð½ orderId: ' + jsonData.orderId);",
          "    });",
          "}",
          "",
          "// Ð”Ð»Ñ GET Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ…",
          "if (pm.request.method === 'GET' && pm.request.url.toString().includes('/orders')) {",
          "    pm.test('ÐžÑ‚Ð²ÐµÑ‚ Ð¸Ð¼ÐµÐµÑ‚ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½ÑƒÑŽ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ', function() {",
          "        var jsonData = pm.response.json();",
          "        ",
          "        if (Array.isArray(jsonData)) {",
          "            // Ð­Ñ‚Ð¾ ÑÐ¿Ð¸ÑÐ¾Ðº Ð·Ð°ÐºÐ°Ð·Ð¾Ð²",
          "            pm.expect(jsonData).to.be.an('array');",
          "            if (jsonData.length > 0) {",
          "                pm.expect(jsonData[0]).to.have.keys([",
          "                    'orderId', 'productName', 'amount', 'customerId', 'status'",
          "                ]);",
          "            }",
          "        } else {",
          "            // Ð­Ñ‚Ð¾ Ð¾Ð´Ð¸Ð½ Ð·Ð°ÐºÐ°Ð·",
          "            pm.expect(jsonData).to.have.keys([",
          "                'orderId', 'productName', 'amount', 'customerId', 'status'",
          "            ]);",
          "        }",
          "    });",
          "}"
        ],
        "type": "text/javascript"
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "orderId",
      "value": "test-order-001",
      "type": "string"
    },
    {
      "key": "customerId",
      "value": "customer-001",
      "type": "string"
    }
  ]
}